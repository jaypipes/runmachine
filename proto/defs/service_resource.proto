syntax = "proto3";

package runm;

import "consumer.proto";
import "distance.proto";
import "error.proto";
import "resource_class.proto";
import "search.proto";
import "session.proto";
import "wrappers.proto";

// The runm-resource gRPC service manages inventory of the deployment's set of
// resource providers, the transactional claims of resources, basic scheduling
// and reservations.
service RunmResource {
    // Returns information about a specific resource class
    rpc resource_class_get(ResourceClassGetRequest) returns (ResourceClass) {}

    // Deletes one or more resource classes
    rpc resource_class_delete(ResourceClassDeleteRequest) returns (ResourceClassDeleteResponse) {}

    // Set information about a specific resource class
    rpc resource_class_set(ResourceClassSetRequest) returns (ResourceClassSetResponse) {}

    // Returns information about multiple resource classs
    rpc resource_class_list(ResourceClassListRequest) returns (stream ResourceClass) {}

    // Returns information about a specific consumer type
    rpc consumer_type_get(ConsumerTypeGetRequest) returns (ConsumerType) {}

    // Deletes one or more consumer typees
    rpc consumer_type_delete(ConsumerTypeDeleteRequest) returns (ConsumerTypeDeleteResponse) {}

    // Set information about a specific consumer type
    rpc consumer_type_set(ConsumerTypeSetRequest) returns (ConsumerTypeSetResponse) {}

    // Returns information about multiple consumer types
    rpc consumer_type_list(ConsumerTypeListRequest) returns (stream ConsumerType) {}

    // Returns information about a specific consumer type
    rpc consumer_get(ConsumerGetRequest) returns (Consumer) {}

    // Deletes one or more consumer typees
    rpc consumer_delete(ConsumerDeleteRequest) returns (ConsumerDeleteResponse) {}

    // Set information about a specific consumer type
    rpc consumer_set(ConsumerSetRequest) returns (ConsumerSetResponse) {}

    // Returns information about multiple consumer types
    rpc consumer_list(ConsumerListRequest) returns (stream Consumer) {}

    // Returns information about a specific distance type
    rpc distance_type_get(DistanceTypeGetRequest) returns (DistanceType) {}

    // Deletes one or more distance typees
    rpc distance_type_delete(DistanceTypeDeleteRequest) returns (DistanceTypeDeleteResponse) {}

    // Set information about a specific distance type
    rpc distance_type_set(DistanceTypeSetRequest) returns (DistanceTypeSetResponse) {}

    // Returns information about multiple distance types
    rpc distance_type_list(DistanceTypeListRequest) returns (stream DistanceType) {}

    // Returns information about a specific distance
    rpc distance_get(DistanceGetRequest) returns (Distance) {}

    // Deletes one or more distancees
    rpc distance_delete(DistanceDeleteRequest) returns (DistanceDeleteResponse) {}

    // Set information about a specific distance
    rpc distance_set(DistanceSetRequest) returns (DistanceSetResponse) {}

    // Returns information about multiple distances
    rpc distance_list(DistanceListRequest) returns (stream Distance) {}
}

// RPC Request payload messages
message ResourceClassGetRequest {
    Session session = 1;
    string search = 2;
}

message ResourceClassSetFields {
    StringValue code = 1;
    StringValue display_name = 2;
    StringValue description = 3;
}

message ResourceClassSetRequest {
    Session session = 1;
    ResourceClass resource_class = 2;
    ResourceClassSetFields changed = 3;
}

message ResourceClassSetResponse {
    repeated Error errors = 1;
    ResourceClass resource_class = 2;
}

message ResourceClassListFilters {
    repeated string identifiers = 1;
}

message ResourceClassListRequest {
    Session session = 1;
    ResourceClassListFilters filters = 2;
    SearchOptions options = 3;
}

message ResourceClassDeleteRequest {
    Session session = 1;
    repeated ResourceClass resource_classes = 2;
}

message ResourceClassDeleteResponse {
    repeated Error errors = 1;
    uint64 num_deleted = 2;
}

message ConsumerGetRequest {
    Session session = 1;
    string search = 2;
}

message ConsumerSetFields {
    StringValue display_name = 1;
    ConsumerType type = 50;
    Project project = 51;
    User user = 52;
}

message ConsumerSetRequest {
    Session session = 1;
    Consumer consumer = 2;
    ConsumerSetFields changed = 3;
}

message ConsumerSetResponse {
    repeated Error errors = 1;
    Consumer consumer = 2;
}

message ConsumerListFilters {
    repeated string identifiers = 1;
    repeated string type_identifiers = 2;
    repeated string project_identifiers = 3;
    repeated string user_identifiers = 4;
}

message ConsumerListRequest {
    Session session = 1;
    ConsumerListFilters filters = 2;
    SearchOptions options = 3;
}

message ConsumerDeleteRequest {
    Session session = 1;
    repeated Consumer consumers = 2;
}

message ConsumerDeleteResponse {
    repeated Error errors = 1;
    uint64 num_deleted = 2;
}

message ConsumerTypeGetRequest {
    Session session = 1;
    string search = 2;
}

message ConsumerTypeSetFields {
    StringValue code = 1;
    StringValue display_name = 2;
    StringValue description = 3;
}

message ConsumerTypeSetRequest {
    Session session = 1;
    ConsumerType consumer_type = 2;
    ConsumerTypeSetFields changed = 3;
}

message ConsumerTypeSetResponse {
    repeated Error errors = 1;
    ConsumerType consumer_type = 2;
}

message ConsumerTypeListFilters {
    repeated string identifiers = 1;
}

message ConsumerTypeListRequest {
    Session session = 1;
    ConsumerTypeListFilters filters = 2;
    SearchOptions options = 3;
}

message ConsumerTypeDeleteRequest {
    Session session = 1;
    repeated ConsumerType consumer_types = 2;
}

message ConsumerTypeDeleteResponse {
    repeated Error errors = 1;
    uint64 num_deleted = 2;
}

message DistanceTypeGetRequest {
    Session session = 1;
    string search = 2;
}

message DistanceTypeSetFields {
    StringValue code = 1;
    StringValue display_name = 2;
    StringValue description = 3;
}

message DistanceTypeSetRequest {
    Session session = 1;
    DistanceType distance_type = 2;
    DistanceTypeSetFields changed = 3;
}

message DistanceTypeSetResponse {
    repeated Error errors = 1;
    DistanceType distance_type = 2;
}

message DistanceTypeListFilters {
    repeated string identifiers = 1;
}

message DistanceTypeListRequest {
    Session session = 1;
    DistanceTypeListFilters filters = 2;
    SearchOptions options = 3;
}

message DistanceTypeDeleteRequest {
    Session session = 1;
    repeated DistanceType distance_types = 2;
}

message DistanceTypeDeleteResponse {
    repeated Error errors = 1;
    uint64 num_deleted = 2;
}

message DistanceGetRequest {
    Session session = 1;
    string search = 2;
}

message DistanceSetFields {
    StringValue code = 1;
    StringValue display_name = 2;
    UInt32Value position = 3;
    DistanceType type = 50;
}

message DistanceSetRequest {
    Session session = 1;
    Distance distance = 2;
    DistanceSetFields changed = 3;
}

message DistanceSetResponse {
    repeated Error errors = 1;
    Distance distance = 2;
}

message DistanceListFilters {
    repeated string identifiers = 1;
    repeated string type_identifiers = 2;
}

message DistanceListRequest {
    Session session = 1;
    DistanceListFilters filters = 2;
    SearchOptions options = 3;
}

message DistanceDeleteRequest {
    Session session = 1;
    repeated Distance distances = 2;
}

message DistanceDeleteResponse {
    repeated Error errors = 1;
    uint64 num_deleted = 2;
}
